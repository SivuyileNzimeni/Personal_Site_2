<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Sivuyile Nzimeni">
<meta name="dcterms.date" content="2022-09-22">
<meta name="description" content="Rolling Blackouts have been a staple of the South African economy since 2008. In this post, we visualise the an aggregate of Eskom’s unavailable capacity variables.">

<title>Sivuyile Nzimeni - 2022 Eskom Unavailabe Capacity</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-listing/list.min.js"></script>
<script src="../../site_libs/quarto-listing/quarto-listing.js"></script>
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script>

  window.document.addEventListener("DOMContentLoaded", function (_event) {
    const listingTargetEl = window.document.querySelector('#listing-listing .list');
    if (!listingTargetEl) {
      // No listing discovered, do not attach.
      return; 
    }

    const options = {
      valueNames: [{ data: ['index'] },{ data: ['categories'] },{ data: ['listing-date-sort'] },{ data: ['listing-file-modified-sort'] }],
      
      searchColumns: [],
    };

    window['quarto-listings'] = window['quarto-listings'] || {};
    window['quarto-listings']['listing-listing'] = new List('listing-listing', options);

    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  });

  window.addEventListener('hashchange',() => {
    if (window['quarto-listing-loaded']) {
      window['quarto-listing-loaded']();
    }
  })
  </script>

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<meta name="twitter:title" content="Sivuyile Nzimeni - 2022 Eskom Unavailabe Capacity">
<meta name="twitter:description" content="Rolling Blackouts have been a staple of the South African economy since 2008. In this post, we visualise the an aggregate of Eskom’s unavailable capacity variables.">
<meta name="twitter:image" content="./Eskom_Logo.jpg">
<meta name="twitter:creator" content="@Sivu_Nzimeni">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Sivuyile Nzimeni</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Sivu_Nzimeni"><i class="bi bi-twitter" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/SivuyileNzimeni"><i class="bi bi-github" role="img">
</i> 
 </a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://za.linkedin.com/in/sivuyile-nzimeni-98006ba0"><i class="bi bi-linkedin" role="img">
</i> 
 </a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">INTRODUCTION</a>
  <ul class="collapse">
  <li><a href="#eskom-data-portal" id="toc-eskom-data-portal" class="nav-link" data-scroll-target="#eskom-data-portal">ESKOM Data Portal</a></li>
  <li><a href="#candles" id="toc-candles" class="nav-link" data-scroll-target="#candles">CANDLES</a>
  <ul class="collapse">
  <li><a href="#these-candlesticks-dont-require-loadshedding" id="toc-these-candlesticks-dont-require-loadshedding" class="nav-link" data-scroll-target="#these-candlesticks-dont-require-loadshedding">THESE CANDLESTICKS DON’T REQUIRE LOADSHEDDING</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">CONCLUSION</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">2022 Eskom Unavailabe Capacity</h1>
  <div class="quarto-categories">
    <div class="quarto-category">news</div>
    <div class="quarto-category">API</div>
    <div class="quarto-category">visualisation</div>
  </div>
  </div>

<div>
  <div class="description">
    Rolling Blackouts have been a staple of the South African economy since 2008. In this post, we visualise the an aggregate of Eskom’s unavailable capacity variables.
  </div>
</div>


<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Sivuyile Nzimeni </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 22, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>INTRODUCTION</h1>
<p>In late 2007, Eskom- South Africa’s electricity public utility, announced a rolling Blackout programme to mitigate the risk of a national electricity grid collapse. Fifteen years later, the programme, euphemistically named ‘loadshedding’, persists. The energy provider has failed to provide a sufficient supply of energy to meet demand in their domestic markets. In fact, according to <span class="citation" data-cites="bloomberg">Bloomberg (<a href="#ref-bloomberg" role="doc-biblioref">n.d.</a>)</span> the energy crisis has worsened, 2022 has already had 100 days of rolling Blackouts.</p>
<p>Of course, there are a plethora of reasons that explain the crisis including, corruption, political interference, political inaction, poor corporate governance, financial mismanagement and many others (see <span class="citation" data-cites="grootes2019">Grootes (<a href="#ref-grootes2019" role="doc-biblioref">2019</a>)</span> ). With the aforementioned context in mind, it worth exploring some data to form a more comprehensive understanding of the status of energy supply in the country.</p>
<section id="eskom-data-portal" class="level2">
<h2 class="anchored" data-anchor-id="eskom-data-portal">ESKOM Data Portal</h2>
<p>Fortunately, the state-owned institution has a data portal replete with a data dictionary, data visualisation and data exporting functionality. Additionally, obtaining the bulk data export is take a few seconds. Ultimately, a person can access data from Eskom for the previous five years.</p>
<p>The first task of analysing the dataset is to understand it’s structure. In the Eskom bulk data contains several dimensions including energy generation, energy generation sources, energy demand and energy supply and importantly Capacity Loss data. Capacity Loss is measured by numerous variables depending on the type of loss. Below, the Eskom Data Portal provides an glossary of variable definitions. This analysis will focus on Capacity Loss Factor which is a measure of unavailable energy capacity.</p>
<div class="cell">
<details>
<summary>see code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>Eskom_Data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="at">file =</span><span class="st">"./ESK2567.csv"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-2"><a href="#cb1-2"></a>  <span class="fu">clean_names</span>() <span class="sc">|&gt;</span> </span>
<span id="cb1-3"><a href="#cb1-3"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">date_time_hour_beginning =</span> <span class="fu">ymd_hms</span>(date_time_hour_beginning)) <span class="sc">|&gt;</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  <span class="fu">filter</span>(date_time_hour_beginning <span class="sc">&lt;=</span> <span class="fu">Sys.Date</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol type="1">
<li><strong>Total Planned Capability Loss Factor</strong>: the ratio between the <em>unavailable energy</em> of the <em>units</em> that are <em>out on planned maintenance</em> over a period <em>compared to the total net installed capacity</em> of all units over the same period.</li>
<li><strong>Total Unplanned Capability Loss Factor</strong>: the ratio between the <em>unavailable energy</em> of the units that are <em>out on unplanned outages</em> over a period compared to the total installed capacity of all units over the same period.</li>
<li><strong>Total Other Capability Loss Factor</strong>: the ratio between the <em>unavailable energy</em> of the units <em>that cannot be dispatched</em>, <em>due to constraints out of the power station management control</em>, over a period over a period compared to the <em>total net install capacity of all units</em> over the same period.</li>
</ol>
<p>Based on the variable definitions above, we can observe a number of important aspects. First, the Capacity Loss Factor, is differentiated between planned and unplanned, failures to power station management control compared to the total net install capacity of all units. In essence is each variable, is a ratio between available and unavailable capacity. It is also important to highlight the <code>date_time_hour_beginning</code> variable, an hourly update of capacity availability.</p>
<div class="cell">

</div>
</section>
<section id="candles" class="level2">
<h2 class="anchored" data-anchor-id="candles">CANDLES</h2>
<p>Visualising a large time-series dataset is challenging. Fortunately, the world of finance has solved this problem. Candlestick charts are popular financial charts which provide a succinct view of daily share price movement. They provide a daily distribution of share price activity, i.e, candle charts are modified small box plots. As usual, <span class="citation" data-cites="wickham2022">Wickham (<a href="#ref-wickham2022" role="doc-biblioref">2022</a>)</span> ’s set of packages have all the tools required to clean data and visualise the data. In this case, <span class="citation" data-cites="dancho2022">Dancho and Vaughan (<a href="#ref-dancho2022" role="doc-biblioref">2022</a>)</span> ’s <code>tidyquant</code> package offers <code>geom_candlestick</code> function which coupled with <code>ggplot2</code> can help render candlestick charts. Prior to plotting the visualisation, we create a data.frame with all required columns, namely, Unavailable Capacity Loss Factor at Open, Low and High.</p>
<p>In the code chunk below, we create function which takes a function, finds all the unique date in the dataset along with the variables required to plot the candlestick chart. The function returns a data.frame. The <code>candle_data</code> function is applied to the list of unique dates through <code>lapply</code> and <code>do.call</code> to finalise the dataset.</p>
<div class="cell">

</div>
<section id="these-candlesticks-dont-require-loadshedding" class="level3">
<h3 class="anchored" data-anchor-id="these-candlesticks-dont-require-loadshedding">THESE CANDLESTICKS DON’T REQUIRE LOADSHEDDING</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/Data_Viz-1.png" class="img-fluid" alt="2018 - 2022 Unavailable Capacity Loss Factor candlestick chart illustrating new highs in unavailable throughout the period to 2022." width="672"></p>
</div>
</div>
<p>There are many complicated ways to analyse candlestick charts, that is a discussion for another day. For now, we are interested in tracking the general direction of the Unavailable Capacity Loss Factor. In short, the capacity unavailability has been increasing from 2018 to 2022. Throughout the period, there are new highs in unavailability indicating a worsening situation. If we zoom into 2022, the trend continues, confirming the depths of South Africa’s energy crisis.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="index_files/figure-html/2022_Zoom-1.png" class="img-fluid" alt="2022 Unavailable Loss Factor candlestick chart for the period June 2022 to September 2022. In line with the earlier plot, there are new highs in the period for Unavailable Capacity Loss Factor indicator." width="672"></p>
</div>
</div>
</section>
</section>
</section>
<section id="conclusion" class="level1">
<h1>CONCLUSION</h1>
<p>In this post, we visualised data Capacity Loss Factor data from Eskom. The goal was visualisation, a more detailed analysis would employ time series analysis approaches such as Wavelet, Long-Term Memory Processes and myriad of other modelling approaches. <span class="citation" data-cites="woodwardwayne">Woodward Wayne, Gary, Henry, and Elliot, Allan (<a href="#ref-woodwardwayne" role="doc-biblioref">n.d.</a>)</span> provide a detailed treatment of applied time series analysis in R. Fortunately, the energy crisis at Eskom is sufficiently glaring as to require no sophisticated analysis.</p>




</section>

<div class="quarto-listing quarto-listing-container-default" id="listing-listing">
<div class="list quarto-listing-default">

</div>
<div class="listing-no-matching d-none">
No matching items
</div>
</div><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-bloomberg" class="csl-entry" role="doc-biblioentry">
Bloomberg. n.d. <span>“South Africa Hits 100 Days of Load-Shedding in 2022.”</span> <a href="https://mybroadband.co.za/news/energy/460710-south-africa-hits-100-days-of-load-shedding-in-2022.html">https://mybroadband.co.za/news/energy/460710-south-africa-hits-100-days-of-load-shedding-in-2022.html</a>.
</div>
<div id="ref-dancho2022" class="csl-entry" role="doc-biblioentry">
Dancho, Matt, and Davis Vaughan. 2022. <em>Tidyquant: Tidy Quantitative Financial Analysis</em>. <a href="https://github.com/business-science/tidyquant">https://github.com/business-science/tidyquant</a>.
</div>
<div id="ref-grootes2019" class="csl-entry" role="doc-biblioentry">
Grootes, Stephen. 2019. <span>“ANALYSIS: Twelve Years of Load Shedding <span></span> Written, Starring &amp; Directed by the ANC.”</span> <a href="https://www.dailymaverick.co.za/article/2019-12-09-twelve-years-of-load-shedding-written-starring-directed-by-the-anc/">https://www.dailymaverick.co.za/article/2019-12-09-twelve-years-of-load-shedding-written-starring-directed-by-the-anc/</a>.
</div>
<div id="ref-wickham2022" class="csl-entry" role="doc-biblioentry">
Wickham, Hadley. 2022. <em>Tidyverse: Easily Install and Load the Tidyverse</em>. <a href="https://CRAN.R-project.org/package=tidyverse">https://CRAN.R-project.org/package=tidyverse</a>.
</div>
<div id="ref-woodwardwayne" class="csl-entry" role="doc-biblioentry">
Woodward Wayne, Gary, Henry, and Elliot, Allan. n.d. <span>“Applied Time Series Analysis with R.”</span> <a href="https://www.routledge.com/Applied-Time-Series-Analysis-with-R/Woodward-Gray-Elliott/p/book/9781032097220">https://www.routledge.com/Applied-Time-Series-Analysis-with-R/Woodward-Gray-Elliott/p/book/9781032097220</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>